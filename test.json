{"_type":"BoundedContext","aggregates":[{"_type":"Aggregate","aggregateRoot":{"_type":"AggregateRoot","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"userId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"productId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"sku"},{"_type":"FieldDescriptor","className":"Integer","displayName":"","name":"quantity"},{"_type":"FieldDescriptor","className":"OrderStatus","displayName":"","name":"status"},{"_type":"FieldDescriptor","className":"Double","displayName":"","name":"totalAmount"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"paymentId"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"createdAt"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"updatedAt"}]},"commands":[{"_type":"Command","controllerInfo":{"apiPath":"approvepayment","fullApiPath":"","method":"POST"},"displayName":"결제 승인","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"paymentId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"transactionId"}],"isRestRepository":false,"name":"ApprovePayment","restRepositoryInfo":{"method":"POST"},"trigger":"@PrePersist","examples":[{"given":[{"name":"Order","type":"Aggregate","value":{"createdAt":"2024-06-01T10:00:00Z","orderId":1001,"paymentId":5001,"productId":3001,"quantity":1,"sku":"SKU-260WIDE-FF","status":"PAYMENT_REQUESTED","totalAmount":120000,"updatedAt":"N/A","userId":2001}}],"then":[{"name":"OrderConfirmed","type":"Event","value":{"address":"서울시 강남구 테헤란로 1","confirmedAt":"2024-06-01T10:02:00Z","flatFooted":true,"orderId":1001,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","status":"CONFIRMED","userId":2001,"width":"WIDE"}}],"when":[{"name":"ApprovePayment","type":"Command","value":{"orderId":1001,"paymentId":5001,"transactionId":"TX-20240601-001"}}]}],"type":"Command"},{"_type":"Command","controllerInfo":{"apiPath":"initiateorder","fullApiPath":"","method":"POST"},"displayName":"주문 시작","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"userId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"productId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"sku"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"size"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"width"},{"_type":"FieldDescriptor","className":"Boolean","displayName":"","name":"flatFooted"},{"_type":"FieldDescriptor","className":"Integer","displayName":"","name":"quantity"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"address"},{"_type":"FieldDescriptor","className":"Boolean","displayName":"","name":"privacyConsent"}],"isRestRepository":false,"name":"InitiateOrder","restRepositoryInfo":{"method":"POST"},"trigger":"@PrePersist","examples":[{"given":[{"name":"Order","type":"Aggregate","value":{"createdAt":"2024-06-01T10:00:00Z","orderId":1001,"paymentId":"N/A","productId":3001,"quantity":1,"sku":"SKU-260WIDE-FF","status":"INITIATED","totalAmount":120000,"updatedAt":"N/A","userId":2001}}],"then":[{"name":"OrderInitiated","type":"Event","value":{"address":"서울시 강남구 테헤란로 1","createdAt":"2024-06-01T10:00:00Z","flatFooted":true,"orderId":1001,"privacyConsent":true,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","status":"INITIATED","userId":2001,"width":"WIDE"}}],"when":[{"name":"InitiateOrder","type":"Command","value":{"address":"서울시 강남구 테헤란로 1","flatFooted":true,"privacyConsent":true,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","userId":2001,"width":"WIDE"}}]},{"given":[{"name":"Order","type":"Aggregate","value":{"createdAt":"2024-06-01T10:05:00Z","orderId":1002,"paymentId":"N/A","productId":3002,"quantity":1,"status":"INITIATED","totalAmount":90000,"updatedAt":"N/A","userId":2002}}],"then":[{"name":"OrderInitiated","type":"Event","value":{"address":"서울시 서초구 반포대로 2","createdAt":"2024-06-01T10:05:00Z","orderId":1002,"privacyConsent":true,"productId":3002,"quantity":1,"status":"INITIATED","userId":2002}}],"when":[{"name":"InitiateOrder","type":"Command","value":{"address":"서울시 서초구 반포대로 2","privacyConsent":true,"productId":3002,"quantity":1,"userId":2002}}]}],"type":"Command"},{"_type":"Command","controllerInfo":{"apiPath":"requestpayment","fullApiPath":"","method":"POST"},"displayName":"결제 요청","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"paymentMethod"},{"_type":"FieldDescriptor","className":"Double","displayName":"","name":"amount"}],"isRestRepository":false,"name":"RequestPayment","restRepositoryInfo":{"method":"POST"},"trigger":"@PrePersist","examples":[{"given":[{"name":"Order","type":"Aggregate","value":{"createdAt":"2024-06-01T10:00:00Z","orderId":1001,"paymentId":"N/A","productId":3001,"quantity":1,"sku":"SKU-260WIDE-FF","status":"INITIATED","totalAmount":120000,"updatedAt":"N/A","userId":2001}}],"then":[{"name":"PaymentRequested","type":"Event","value":{"amount":120000,"orderId":1001,"paymentId":5001,"paymentMethod":"CARD","requestedAt":"2024-06-01T10:01:00Z"}}],"when":[{"name":"RequestPayment","type":"Command","value":{"amount":120000,"orderId":1001,"paymentMethod":"CARD"}}]}],"type":"Command"},{"_type":"Command","controllerInfo":{"apiPath":"failpayment","fullApiPath":"","method":"POST"},"displayName":"결제 실패","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"paymentId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"failureReason"}],"isRestRepository":false,"name":"FailPayment","restRepositoryInfo":{"method":"POST"},"trigger":"@PrePersist","examples":[{"given":[{"name":"Order","type":"Aggregate","value":{"createdAt":"2024-06-01T10:00:00Z","orderId":1001,"paymentId":5001,"productId":3001,"quantity":1,"sku":"SKU-260WIDE-FF","status":"PAYMENT_REQUESTED","totalAmount":120000,"updatedAt":"N/A","userId":2001}}],"then":[{"name":"OrderCancelled","type":"Event","value":{"address":"서울시 강남구 테헤란로 1","cancelReason":"카드 한도 초과","cancelledAt":"2024-06-01T10:03:00Z","flatFooted":true,"orderId":1001,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","status":"CANCELLED","userId":2001,"width":"WIDE"}}],"when":[{"name":"FailPayment","type":"Command","value":{"failureReason":"카드 한도 초과","orderId":1001,"paymentId":5001}}]}],"type":"Command"}],"displayName":"주문","events":[{"_type":"Event","displayName":"주문이 시작됨","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"userId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"productId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"sku"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"size"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"width"},{"_type":"FieldDescriptor","className":"Boolean","displayName":"","name":"flatFooted"},{"_type":"FieldDescriptor","className":"Integer","displayName":"","name":"quantity"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"address"},{"_type":"FieldDescriptor","className":"Boolean","displayName":"","name":"privacyConsent"},{"_type":"FieldDescriptor","className":"OrderStatus","displayName":"","name":"status"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"createdAt"}],"name":"OrderInitiated","trigger":"","type":"Event"},{"_type":"Event","displayName":"결제가 요청됨","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"paymentId"},{"_type":"FieldDescriptor","className":"Double","displayName":"","name":"amount"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"paymentMethod"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"requestedAt"}],"name":"PaymentRequested","trigger":"","type":"Event"},{"_type":"Event","displayName":"주문이 확정됨","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"userId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"productId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"sku"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"size"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"width"},{"_type":"FieldDescriptor","className":"Boolean","displayName":"","name":"flatFooted"},{"_type":"FieldDescriptor","className":"Integer","displayName":"","name":"quantity"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"address"},{"_type":"FieldDescriptor","className":"OrderStatus","displayName":"","name":"status"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"confirmedAt"}],"name":"OrderConfirmed","trigger":"","type":"Event"},{"_type":"Event","displayName":"주문이 취소됨","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"userId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"productId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"sku"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"size"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"width"},{"_type":"FieldDescriptor","className":"Boolean","displayName":"","name":"flatFooted"},{"_type":"FieldDescriptor","className":"Integer","displayName":"","name":"quantity"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"address"},{"_type":"FieldDescriptor","className":"OrderStatus","displayName":"","name":"status"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"cancelReason"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"cancelledAt"}],"name":"OrderCancelled","trigger":"","type":"Event"}],"name":"Order","type":"Aggregate","lifeCycles":[{"trigger":"PrePersist","commands":[{"_type":"Command","controllerInfo":{"apiPath":"approvepayment","fullApiPath":"","method":"POST"},"displayName":"결제 승인","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"paymentId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"transactionId"}],"isRestRepository":false,"name":"ApprovePayment","restRepositoryInfo":{"method":"POST"},"trigger":"@PrePersist","examples":[{"given":[{"name":"Order","type":"Aggregate","value":{"createdAt":"2024-06-01T10:00:00Z","orderId":1001,"paymentId":5001,"productId":3001,"quantity":1,"sku":"SKU-260WIDE-FF","status":"PAYMENT_REQUESTED","totalAmount":120000,"updatedAt":"N/A","userId":2001}}],"then":[{"name":"OrderConfirmed","type":"Event","value":{"address":"서울시 강남구 테헤란로 1","confirmedAt":"2024-06-01T10:02:00Z","flatFooted":true,"orderId":1001,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","status":"CONFIRMED","userId":2001,"width":"WIDE"}}],"when":[{"name":"ApprovePayment","type":"Command","value":{"orderId":1001,"paymentId":5001,"transactionId":"TX-20240601-001"}}]}],"type":"Command"},{"_type":"Command","controllerInfo":{"apiPath":"initiateorder","fullApiPath":"","method":"POST"},"displayName":"주문 시작","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"userId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"productId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"sku"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"size"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"width"},{"_type":"FieldDescriptor","className":"Boolean","displayName":"","name":"flatFooted"},{"_type":"FieldDescriptor","className":"Integer","displayName":"","name":"quantity"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"address"},{"_type":"FieldDescriptor","className":"Boolean","displayName":"","name":"privacyConsent"}],"isRestRepository":false,"name":"InitiateOrder","restRepositoryInfo":{"method":"POST"},"trigger":"@PrePersist","examples":[{"given":[{"name":"Order","type":"Aggregate","value":{"createdAt":"2024-06-01T10:00:00Z","orderId":1001,"paymentId":"N/A","productId":3001,"quantity":1,"sku":"SKU-260WIDE-FF","status":"INITIATED","totalAmount":120000,"updatedAt":"N/A","userId":2001}}],"then":[{"name":"OrderInitiated","type":"Event","value":{"address":"서울시 강남구 테헤란로 1","createdAt":"2024-06-01T10:00:00Z","flatFooted":true,"orderId":1001,"privacyConsent":true,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","status":"INITIATED","userId":2001,"width":"WIDE"}}],"when":[{"name":"InitiateOrder","type":"Command","value":{"address":"서울시 강남구 테헤란로 1","flatFooted":true,"privacyConsent":true,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","userId":2001,"width":"WIDE"}}]},{"given":[{"name":"Order","type":"Aggregate","value":{"createdAt":"2024-06-01T10:05:00Z","orderId":1002,"paymentId":"N/A","productId":3002,"quantity":1,"status":"INITIATED","totalAmount":90000,"updatedAt":"N/A","userId":2002}}],"then":[{"name":"OrderInitiated","type":"Event","value":{"address":"서울시 서초구 반포대로 2","createdAt":"2024-06-01T10:05:00Z","orderId":1002,"privacyConsent":true,"productId":3002,"quantity":1,"status":"INITIATED","userId":2002}}],"when":[{"name":"InitiateOrder","type":"Command","value":{"address":"서울시 서초구 반포대로 2","privacyConsent":true,"productId":3002,"quantity":1,"userId":2002}}]}],"type":"Command"},{"_type":"Command","controllerInfo":{"apiPath":"requestpayment","fullApiPath":"","method":"POST"},"displayName":"결제 요청","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"paymentMethod"},{"_type":"FieldDescriptor","className":"Double","displayName":"","name":"amount"}],"isRestRepository":false,"name":"RequestPayment","restRepositoryInfo":{"method":"POST"},"trigger":"@PrePersist","examples":[{"given":[{"name":"Order","type":"Aggregate","value":{"createdAt":"2024-06-01T10:00:00Z","orderId":1001,"paymentId":"N/A","productId":3001,"quantity":1,"sku":"SKU-260WIDE-FF","status":"INITIATED","totalAmount":120000,"updatedAt":"N/A","userId":2001}}],"then":[{"name":"PaymentRequested","type":"Event","value":{"amount":120000,"orderId":1001,"paymentId":5001,"paymentMethod":"CARD","requestedAt":"2024-06-01T10:01:00Z"}}],"when":[{"name":"RequestPayment","type":"Command","value":{"amount":120000,"orderId":1001,"paymentMethod":"CARD"}}]}],"type":"Command"},{"_type":"Command","controllerInfo":{"apiPath":"failpayment","fullApiPath":"","method":"POST"},"displayName":"결제 실패","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"paymentId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"failureReason"}],"isRestRepository":false,"name":"FailPayment","restRepositoryInfo":{"method":"POST"},"trigger":"@PrePersist","examples":[{"given":[{"name":"Order","type":"Aggregate","value":{"createdAt":"2024-06-01T10:00:00Z","orderId":1001,"paymentId":5001,"productId":3001,"quantity":1,"sku":"SKU-260WIDE-FF","status":"PAYMENT_REQUESTED","totalAmount":120000,"updatedAt":"N/A","userId":2001}}],"then":[{"name":"OrderCancelled","type":"Event","value":{"address":"서울시 강남구 테헤란로 1","cancelReason":"카드 한도 초과","cancelledAt":"2024-06-01T10:03:00Z","flatFooted":true,"orderId":1001,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","status":"CANCELLED","userId":2001,"width":"WIDE"}}],"when":[{"name":"FailPayment","type":"Command","value":{"failureReason":"카드 한도 초과","orderId":1001,"paymentId":5001}}]}],"type":"Command"}]}]},{"_type":"Aggregate","aggregateRoot":{"_type":"AggregateRoot","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderItemId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"productId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"sku"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"size"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"width"},{"_type":"FieldDescriptor","className":"Boolean","displayName":"","name":"flatFooted"},{"_type":"FieldDescriptor","className":"Integer","displayName":"","name":"quantity"},{"_type":"FieldDescriptor","className":"Double","displayName":"","name":"unitPrice"},{"_type":"FieldDescriptor","className":"OrderItemStatus","displayName":"","name":"status"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"createdAt"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"updatedAt"},{"_type":"FieldDescriptor","name":"stockId","className":"StockId","displayName":"재고 ID"}]},"commands":[{"_type":"Command","controllerInfo":{"apiPath":"createorderitem","fullApiPath":"","method":"POST"},"displayName":"주문 옵션 생성","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"productId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"sku"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"size"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"width"},{"_type":"FieldDescriptor","className":"Boolean","displayName":"","name":"flatFooted"},{"_type":"FieldDescriptor","className":"Integer","displayName":"","name":"quantity"},{"_type":"FieldDescriptor","className":"Double","displayName":"","name":"unitPrice"}],"isRestRepository":false,"name":"CreateOrderItem","restRepositoryInfo":{"method":"POST"},"trigger":"@PrePersist","examples":[{"given":[{"name":"OrderItem","type":"Aggregate","value":{"createdAt":"N/A","flatFooted":true,"orderId":2001,"orderItemId":1001,"productId":3001,"quantity":0,"size":"260","sku":"SKU-260WIDE-FF","status":"PENDING","stockId":"N/A","unitPrice":89000,"updatedAt":"N/A","width":"WIDE"}}],"then":[{"name":"OrderItemCreated","type":"Event","value":{"createdAt":"2024-06-01T10:00:00Z","flatFooted":true,"orderId":2001,"orderItemId":1002,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","status":"PENDING","unitPrice":89000,"width":"WIDE"}}],"when":[{"name":"CreateOrderItem","type":"Command","value":{"flatFooted":true,"orderId":2001,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","unitPrice":89000,"width":"WIDE"}}]},{"given":[{"name":"OrderItem","type":"Aggregate","value":{"createdAt":"N/A","flatFooted":false,"orderId":2002,"orderItemId":1003,"productId":3002,"quantity":0,"size":"255","sku":"SKU-255NARROW-NF","status":"PENDING","stockId":"N/A","unitPrice":92000,"updatedAt":"N/A","width":"NARROW"}}],"then":[{"name":"OrderItemCreated","type":"Event","value":{"createdAt":"2024-06-01T10:05:00Z","flatFooted":false,"orderId":2002,"orderItemId":1004,"productId":3002,"quantity":1,"size":"255","sku":"SKU-255NARROW-NF","status":"PENDING","unitPrice":92000,"width":"NARROW"}}],"when":[{"name":"CreateOrderItem","type":"Command","value":{"flatFooted":false,"orderId":2002,"productId":3002,"quantity":1,"size":"255","sku":"SKU-255NARROW-NF","unitPrice":92000,"width":"NARROW"}}]}],"type":"Command"},{"_type":"Command","controllerInfo":{"apiPath":"cancelorderitem","fullApiPath":"","method":"PATCH"},"displayName":"주문 옵션 취소","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderItemId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"cancelReason"}],"isRestRepository":false,"name":"CancelOrderItem","restRepositoryInfo":{"method":"PATCH"},"trigger":"@PrePersist","examples":[{"given":[{"name":"OrderItem","type":"Aggregate","value":{"createdAt":"N/A","flatFooted":true,"orderId":2001,"orderItemId":1002,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","status":"PENDING","stockId":"N/A","unitPrice":89000,"updatedAt":"N/A","width":"WIDE"}}],"then":[{"name":"OrderItemCancelled","type":"Event","value":{"cancelReason":"사용자 요청","cancelledAt":"2024-06-01T10:15:00Z","orderItemId":1002,"status":"CANCELLED"}}],"when":[{"name":"CancelOrderItem","type":"Command","value":{"cancelReason":"사용자 요청","orderItemId":1002}}]},{"given":[{"name":"OrderItem","type":"Aggregate","value":{"createdAt":"N/A","flatFooted":false,"orderId":2002,"orderItemId":1003,"productId":3002,"quantity":1,"size":"255","sku":"SKU-255NARROW-NF","status":"PAID","stockId":"N/A","unitPrice":92000,"updatedAt":"N/A","width":"NARROW"}}],"then":[{"name":"OrderItemCancelled","type":"Event","value":{"cancelReason":"재고 부족","cancelledAt":"2024-06-01T10:20:00Z","orderItemId":1003,"status":"CANCELLED"}}],"when":[{"name":"CancelOrderItem","type":"Command","value":{"cancelReason":"재고 부족","orderItemId":1003}}]}],"type":"Command"},{"_type":"Command","controllerInfo":{"apiPath":"markorderitempaid","fullApiPath":"","method":"PATCH"},"displayName":"주문 옵션 결제 완료 처리","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderItemId"}],"isRestRepository":false,"name":"MarkOrderItemPaid","restRepositoryInfo":{"method":"PATCH"},"trigger":"@PrePersist","examples":[{"given":[{"name":"OrderItem","type":"Aggregate","value":{"createdAt":"N/A","flatFooted":true,"orderId":2001,"orderItemId":1002,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","status":"PAYMENT_REQUESTED","stockId":"N/A","unitPrice":89000,"updatedAt":"N/A","width":"WIDE"}}],"then":[{"name":"OrderItemPaid","type":"Event","value":{"orderItemId":1002,"paidAt":"2024-06-01T10:10:00Z","status":"PAID"}}],"when":[{"name":"MarkOrderItemPaid","type":"Command","value":{"orderItemId":1002}}]}],"type":"Command"}],"displayName":"주문상품","events":[{"_type":"Event","displayName":"주문 옵션이 생성됨","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderItemId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"productId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"sku"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"size"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"width"},{"_type":"FieldDescriptor","className":"Boolean","displayName":"","name":"flatFooted"},{"_type":"FieldDescriptor","className":"Integer","displayName":"","name":"quantity"},{"_type":"FieldDescriptor","className":"Double","displayName":"","name":"unitPrice"},{"_type":"FieldDescriptor","className":"OrderItemStatus","displayName":"","name":"status"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"createdAt"}],"name":"OrderItemCreated","trigger":"","type":"Event"},{"_type":"Event","displayName":"주문 옵션 결제 완료됨","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderItemId"},{"_type":"FieldDescriptor","className":"OrderItemStatus","displayName":"","name":"status"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"paidAt"}],"name":"OrderItemPaid","trigger":"","type":"Event"},{"_type":"Event","displayName":"주문 옵션이 취소됨","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderItemId"},{"_type":"FieldDescriptor","className":"OrderItemStatus","displayName":"","name":"status"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"cancelReason"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"cancelledAt"}],"name":"OrderItemCancelled","trigger":"","type":"Event"}],"name":"OrderItem","type":"Aggregate","lifeCycles":[{"trigger":"PrePersist","commands":[{"_type":"Command","controllerInfo":{"apiPath":"createorderitem","fullApiPath":"","method":"POST"},"displayName":"주문 옵션 생성","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"productId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"sku"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"size"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"width"},{"_type":"FieldDescriptor","className":"Boolean","displayName":"","name":"flatFooted"},{"_type":"FieldDescriptor","className":"Integer","displayName":"","name":"quantity"},{"_type":"FieldDescriptor","className":"Double","displayName":"","name":"unitPrice"}],"isRestRepository":false,"name":"CreateOrderItem","restRepositoryInfo":{"method":"POST"},"trigger":"@PrePersist","examples":[{"given":[{"name":"OrderItem","type":"Aggregate","value":{"createdAt":"N/A","flatFooted":true,"orderId":2001,"orderItemId":1001,"productId":3001,"quantity":0,"size":"260","sku":"SKU-260WIDE-FF","status":"PENDING","stockId":"N/A","unitPrice":89000,"updatedAt":"N/A","width":"WIDE"}}],"then":[{"name":"OrderItemCreated","type":"Event","value":{"createdAt":"2024-06-01T10:00:00Z","flatFooted":true,"orderId":2001,"orderItemId":1002,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","status":"PENDING","unitPrice":89000,"width":"WIDE"}}],"when":[{"name":"CreateOrderItem","type":"Command","value":{"flatFooted":true,"orderId":2001,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","unitPrice":89000,"width":"WIDE"}}]},{"given":[{"name":"OrderItem","type":"Aggregate","value":{"createdAt":"N/A","flatFooted":false,"orderId":2002,"orderItemId":1003,"productId":3002,"quantity":0,"size":"255","sku":"SKU-255NARROW-NF","status":"PENDING","stockId":"N/A","unitPrice":92000,"updatedAt":"N/A","width":"NARROW"}}],"then":[{"name":"OrderItemCreated","type":"Event","value":{"createdAt":"2024-06-01T10:05:00Z","flatFooted":false,"orderId":2002,"orderItemId":1004,"productId":3002,"quantity":1,"size":"255","sku":"SKU-255NARROW-NF","status":"PENDING","unitPrice":92000,"width":"NARROW"}}],"when":[{"name":"CreateOrderItem","type":"Command","value":{"flatFooted":false,"orderId":2002,"productId":3002,"quantity":1,"size":"255","sku":"SKU-255NARROW-NF","unitPrice":92000,"width":"NARROW"}}]}],"type":"Command"},{"_type":"Command","controllerInfo":{"apiPath":"cancelorderitem","fullApiPath":"","method":"PATCH"},"displayName":"주문 옵션 취소","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderItemId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"cancelReason"}],"isRestRepository":false,"name":"CancelOrderItem","restRepositoryInfo":{"method":"PATCH"},"trigger":"@PrePersist","examples":[{"given":[{"name":"OrderItem","type":"Aggregate","value":{"createdAt":"N/A","flatFooted":true,"orderId":2001,"orderItemId":1002,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","status":"PENDING","stockId":"N/A","unitPrice":89000,"updatedAt":"N/A","width":"WIDE"}}],"then":[{"name":"OrderItemCancelled","type":"Event","value":{"cancelReason":"사용자 요청","cancelledAt":"2024-06-01T10:15:00Z","orderItemId":1002,"status":"CANCELLED"}}],"when":[{"name":"CancelOrderItem","type":"Command","value":{"cancelReason":"사용자 요청","orderItemId":1002}}]},{"given":[{"name":"OrderItem","type":"Aggregate","value":{"createdAt":"N/A","flatFooted":false,"orderId":2002,"orderItemId":1003,"productId":3002,"quantity":1,"size":"255","sku":"SKU-255NARROW-NF","status":"PAID","stockId":"N/A","unitPrice":92000,"updatedAt":"N/A","width":"NARROW"}}],"then":[{"name":"OrderItemCancelled","type":"Event","value":{"cancelReason":"재고 부족","cancelledAt":"2024-06-01T10:20:00Z","orderItemId":1003,"status":"CANCELLED"}}],"when":[{"name":"CancelOrderItem","type":"Command","value":{"cancelReason":"재고 부족","orderItemId":1003}}]}],"type":"Command"},{"_type":"Command","controllerInfo":{"apiPath":"markorderitempaid","fullApiPath":"","method":"PATCH"},"displayName":"주문 옵션 결제 완료 처리","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderItemId"}],"isRestRepository":false,"name":"MarkOrderItemPaid","restRepositoryInfo":{"method":"PATCH"},"trigger":"@PrePersist","examples":[{"given":[{"name":"OrderItem","type":"Aggregate","value":{"createdAt":"N/A","flatFooted":true,"orderId":2001,"orderItemId":1002,"productId":3001,"quantity":1,"size":"260","sku":"SKU-260WIDE-FF","status":"PAYMENT_REQUESTED","stockId":"N/A","unitPrice":89000,"updatedAt":"N/A","width":"WIDE"}}],"then":[{"name":"OrderItemPaid","type":"Event","value":{"orderItemId":1002,"paidAt":"2024-06-01T10:10:00Z","status":"PAID"}}],"when":[{"name":"MarkOrderItemPaid","type":"Command","value":{"orderItemId":1002}}]}],"type":"Command"}]}]},{"_type":"Aggregate","aggregateRoot":{"_type":"AggregateRoot","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"paymentId"},{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"userId"},{"_type":"FieldDescriptor","className":"Double","displayName":"","name":"amount"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"currency"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"paymentMethod"},{"_type":"FieldDescriptor","className":"PaymentStatus","displayName":"","name":"status"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"transactionId"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"requestedAt"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"approvedAt"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"failedAt"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"createdAt"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"updatedAt"},{"_type":"FieldDescriptor","name":"orderId","className":"OrderId","displayName":"주문 ID"}]},"displayName":"결제","name":"Payment","type":"Aggregate"}],"displayName":"주문","name":"Order","readModels":[{"_type":"View","displayName":"주문 상세 조회","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","name":"id"}],"name":"OrderDetails","queryOption":{"apiPath":""},"queryParameters":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"}]},{"_type":"View","displayName":"주문 목록 조회","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","name":"id"}],"name":"OrderList","queryOption":{"apiPath":""},"queryParameters":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"userId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"status"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"fromDate"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"toDate"},{"_type":"FieldDescriptor","className":"Integer","displayName":"","name":"page"},{"_type":"FieldDescriptor","className":"Integer","displayName":"","name":"size"}]},{"_type":"View","displayName":"주문 옵션별 재고/가능여부 조회","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","name":"id"}],"name":"OrderOptionAvailability","queryOption":{"apiPath":""},"queryParameters":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"productId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"size"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"width"},{"_type":"FieldDescriptor","className":"Boolean","displayName":"","name":"flatFooted"}]},{"_type":"View","displayName":"주문 옵션 주문 가능 여부 조회","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","name":"id"}],"name":"OrderItemAvailability","queryOption":{"apiPath":""},"queryParameters":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"productId"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"size"},{"_type":"FieldDescriptor","className":"String","displayName":"","name":"width"},{"_type":"FieldDescriptor","className":"Boolean","displayName":"","name":"flatFooted"}]},{"_type":"View","displayName":"주문별 옵션 목록 조회","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","name":"id"}],"name":"OrderItemListByOrder","queryOption":{"apiPath":""},"queryParameters":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderId"}]},{"_type":"View","displayName":"주문 옵션 상세 조회","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","name":"id"}],"name":"OrderItemDetails","queryOption":{"apiPath":""},"queryParameters":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"orderItemId"}]},{"_type":"View","displayName":"주문별 결제 내역 목록","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","name":"id"}],"name":"PaymentListByOrder","queryOption":{"apiPath":""},"queryParameters":[{"_type":"FieldDescriptor","className":"OrderId","displayName":"","name":"orderId"}]},{"_type":"View","displayName":"결제 상세 조회","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","name":"id"}],"name":"PaymentDetails","queryOption":{"apiPath":""},"queryParameters":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"paymentId"}]},{"_type":"View","displayName":"사용자별 결제 내역 목록","fieldDescriptors":[{"_type":"FieldDescriptor","className":"Long","name":"id"}],"name":"PaymentListByUser","queryOption":{"apiPath":""},"queryParameters":[{"_type":"FieldDescriptor","className":"Long","displayName":"","name":"userId"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"fromDate"},{"_type":"FieldDescriptor","className":"Date","displayName":"","name":"toDate"},{"_type":"FieldDescriptor","className":"Integer","displayName":"","name":"page"},{"_type":"FieldDescriptor","className":"Integer","displayName":"","name":"size"}]}]}
